requester={...requester,element:document.getElementById("requester-data"),elements:{table:{loader:document.getElementById("table-loader")}},init:async function(e=!1){const t=await this.fetchData(e);if(200!==t.status)throw new Error(`HTTP error! status: ${t.status}`);{let n=await t.json();if(this.hide(this.elements.table.loader),void 0!==n.error){const e=document.createElement("label");return e.innerText=n.error,void this.element.append(e)}this.generateTable(this.element,n),e&&this.is_admin&&(this.show(this.elements.refreshButton.label),this.hide(this.elements.refreshButton.loader),this.enable(this.elements.refreshButton.element))}},fetchData:async function(e=!1){this.show(this.elements.table.loader);const t={action:"return_data",nonce:this.nonce};e&&this.is_admin&&(t.refresh=!0,this.hide(this.elements.refreshButton.label),this.show(this.elements.refreshButton.loader),this.disable(this.elements.refreshButton.element));return await fetch(this.ajax_url,{method:"post",headers:{"Content-type":"application/x-www-form-urlencoded; charset=UTF-8"},body:new URLSearchParams(t).toString()})},generateTable:function(e,t){const n=document.createElement("table"),a=document.createElement("caption"),s=document.createElement("thead"),r=document.createElement("tr"),l=document.createElement("tbody");for(header in tableData=t.data,n.className=this.is_admin?"wp-list-table widefat fixed striped table-view-list":"requester-table",a.innerText=t.title,n.append(a),tableData.headers){const e=document.createElement("th");e.scope="col",e.id=tableData.headers[header].replace(" ","-").toLowerCase(),e.className="manage-column",e.innerText=tableData.headers[header],r.append(e)}s.append(r),n.append(s);for(const e in tableData.rows){const t=document.createElement("tr"),n=tableData.rows[e];for(const e in n){const a=document.createElement("td");if("date"==e){const t=new Date(n[e]);a.innerText=t.toLocaleDateString(this.locale)}else a.innerText=n[e];t.append(a)}l.append(t)}n.append(l),e.append(n)},show:function(e){e.style.display="block"},hide:function(e){e.style.display="none"},enable:function(e){e.disabled=!1},disable:function(e){e.disabled=!0}},document.addEventListener("load",requester.init()),requester.is_admin&&(requester.elements.refreshButton={element:document.getElementById("requester-refresh-button"),label:document.getElementsByClassName("button-label")[0],loader:document.getElementsByClassName("button-loader")[0]},requester.elements.refreshButton.element.addEventListener("click",(function(e){const t=requester.element.getElementsByTagName("table")[0];void 0!==t&&t.remove(),requester.init(!0)}),!1));